
florp!!!!!

<script>
(async () => {
  const log = (msg) => {
    console.log("[PWA]", msg);
    const el = document.createElement("div");
    el.textContent = msg;
    document.body.appendChild(el);
  };

  // HTTPS Check
  log("Protocol: " + location.protocol);

  // Manifest Check
  const manifestLink = document.querySelector('link[rel="manifest"]');
  if (manifestLink) {
    log("Manifest found: " + manifestLink.href);
    fetch(manifestLink.href)
      .then(r => r.json())
      .then(j => log("Manifest loaded: " + j.name))
      .catch(e => log("Manifest error: " + e));
  } else {
    log("Manifest NOT found");
  }

  // Service Worker Check
  if ("serviceWorker" in navigator) {
    try {
      const reg = await navigator.serviceWorker.getRegistration();
      if (reg) {
        log("Service Worker active");
      } else {
        log("Service Worker NOT registered");
      }
    } catch (e) {
      log("SW error: " + e);
    }
  } else {
    log("Service Worker not supported");
  }

  // Installability
  window.addEventListener("beforeinstallprompt", () => {
    log("Install prompt available (Chromium)");
  });

  // Standalone mode
  const isStandalone =
    window.matchMedia("(display-mode: standalone)").matches ||
    window.navigator.standalone === true;

  log("Standalone mode: " + isStandalone);
})();
</script>
