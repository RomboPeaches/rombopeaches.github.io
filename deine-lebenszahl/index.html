<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lebenszahl Rechner</title>
<style>
body {
    margin:0;
    font-family:'Segoe UI',Arial,sans-serif;
    background:#ac352c;
    display:flex;
    justify-content:center;
    padding:20px;
    color:#111;
}

.container {
    background:#fff;
    border-radius:8px;
    padding:24px;
    height: vh;
    width:100%;
    max-width:480px;
    box-shadow:0 1px 10px rgba(0,0,0,0.15);
    display:flex;
    flex-direction:column;
    animation:fadein 600ms;
}

h1 { text-align:center; margin-bottom:12px; color:#333; }
p.intro { text-align:center; font-size:16px; color:#555; margin-bottom:20px; }

input[type="text"] {
    width:100%;
    padding:14px;
    font-size:18px;
    border-radius:6px;
    border:1px solid #ccc;
    background:#fafafa;
    box-sizing:border-box;
    text-align:center;
    margin-bottom:12px;
}

button.calc {
    width:100%;
    padding:14px;
    font-size:18px;
    border:none;
    border-radius:6px;
    background:#333;
    color:#fff;
    cursor:pointer;
    font-weight:bold;
    transition:0.2s;
}

button.calc:hover { background:#555; }

.result { margin-top:20px; }

.progress-container {
    width:100%;
    background:#eee;
    border-radius:6px;
    overflow:hidden;
    height:20px;
    margin-top:12px;
}

.progress-bar {
    width:0%;
    height:100%;
    border-radius: 8px;
    background:#333;
    transition:width 0.1s linear;
}

.row {
    display:flex;
    justify-content:space-between;
    padding:12px;
    margin-top:10px;
    border-radius:6px;
    background:#eee;
    font-size:16px;
    animation:fadein 400ms;
}

.row.master { font-weight:bold; background:#ddd; }
.row.life { background:#fff9c4; font-weight:bold; font-size:20px; text-align:center; }

.description { margin-top:10px; padding:12px; background:#fafafa; border-radius:6px; font-size:14px; color:#333; }

@keyframes fadein { from {opacity:0;} to {opacity:1;} }

@media (max-width:480px){
    .row { font-size:14px; padding:10px; }
    input[type="text"], button.calc { font-size:16px; padding:12px; }
    .progress-container { height:16px; }
}
</style>
</head>
<body>

<div class="container">
<h1>Lebenszahl Rechner</h1>
<p class="intro">Gib dein Geburtsdatum ein im Format DD.MM.YYYY</p>

<input type="text" id="birthdate" placeholder="z.B. 12.05.1945">
<button class="calc" onclick="berechne()">Berechnen</button>

<div class="result" id="output"></div>
</div>

<script>
function quersumme(z){ return z.toString().split("").reduce((a,b)=>a+Number(b),0); }

function sleep(ms){ return new Promise(resolve => setTimeout(resolve, ms)); }

async function berechne(){
    const output=document.getElementById("output");
    output.innerHTML="";

    const input=document.getElementById("birthdate").value.trim();
    const match=input.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})$/);
    if(!match){
        output.innerHTML=`<div class="row">Ungültiges Datum</div>`;
        return;
    }
    const d=Number(match[1]), m=Number(match[2]), y=Number(match[3]);
    const date=new Date(y,m-1,d);
    if(date.getFullYear()!=y || date.getMonth()!=m-1 || date.getDate()!=d || date>new Date() || y<1900){
        output.innerHTML=`<div class="row">Ungültiges Datum</div>`;
        return;
    }

    // Ladeanimation 3 Sekunden
    output.innerHTML=`
        <div>Berechnung läuft...</div>
        <div class="progress-container"><div class="progress-bar" id="progress"></div></div>
    `;
    const bar=document.getElementById("progress");
    for(let i=0;i<=100;i++){
        bar.style.width=i+'%';
        await sleep(30); // 30ms * 100 = 3 Sekunden
    }

    output.innerHTML=""; // Ergebnisse

    const digits=(""+d+m+y).replace(/\D/g,"");
    let current=quersumme(digits);
    let falts=[];
    let master=null;

    while(current>=10){
        let cls="row";
        let label="Falt-Zahl";
        if([11,22,33].includes(current)){
            cls="row master";
            label="Meisterzahl";
            master=current;
        }
        output.innerHTML+=`<div class="${cls}"><span>${label}</span><span>${current}</span></div>`;
        falts.push(current);
        current=quersumme(current);
    }

    const lebenszahl=current;
    output.innerHTML+=`<div class="row life"><span>Lebenszahl</span><span>${lebenszahl}</span></div>`;

    // Beschreibungstexte
    output.innerHTML+=`<div class="description"><h3>Bedeutung der Lebenszahl ${lebenszahl}</h3><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p></div>`;

    if(falts.length>0){
        const lastFalt=falts[falts.length-1];
        output.innerHTML+=`<div class="description"><h3>Bedeutung der Falt-Zahl ${lastFalt}</h3><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Lorem ipsum dolor sit amet, Falt-Zahl Erklärungstext.</p></div>`;
    }
    if(master){
        output.innerHTML+=`<div class="description"><h3>Bedeutung der Meisterzahl ${master}</h3><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Lorem ipsum dolor sit amet, Meisterzahl Erklärungstext.</p></div>`;
    }
}
</script>

</body>
</html>
